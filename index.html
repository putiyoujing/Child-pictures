<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童识字小报生成器</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 页头 -->
        <header class="header">
            <h1>🎨 儿童识字小报生成器</h1>
            <p>为5-9岁孩子打造有趣的识字学习小报</p>
        </header>

        <!-- 主体内容 - 左右布局 -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- 左侧：输入控制区 -->
                <div class="left-panel">
                    <!-- API设置区域 -->
                    <section class="api-section">
                        <h2>API设置</h2>
                        <div class="api-key-group">
                            <label for="apiKey">kie.ai的API密钥：</label>
                            <div class="api-key-input">
                                <input type="password" id="apiKey" placeholder="请输入kie.ai的API密钥">
                                <button type="button" id="toggleApiKey" class="toggle-btn">👁️</button>
                                <button type="button" id="testApiBtn" class="test-btn">测试</button>
                            </div>
                            <div class="api-key-status">
                                <input type="checkbox" id="saveApiKey"> 保存密钥到本地
                                <span id="apiStatus" class="api-status"></span>
                            </div>
                        </div>
                    </section>

                    <!-- 快捷选择区域 -->
                    <section class="quick-select-section">
                        <h2>选择主题和标题</h2>

                        <!-- 分类标签 -->
                        <div class="category-tabs">
                            <button class="tab-btn active" data-category="daily">生活场景</button>
                            <button class="tab-btn" data-category="social">社会场所</button>
                            <button class="tab-btn" data-category="nature">自然动物</button>
                            <button class="tab-btn" data-category="transport">交通工具</button>
                            <button class="tab-btn" data-category="culture">节日文化</button>
                        </div>

                        <!-- 主题卡片 -->
                        <div class="theme-cards" id="themeCards">
                            <!-- 动态生成主题卡片 -->
                        </div>

                        <!-- 标题选择 -->
                        <div class="title-selection">
                            <label for="titleSelect">选择标题：</label>
                            <select id="titleSelect" class="title-select">
                                <option value="">请先选择主题</option>
                            </select>
                        </div>

                        <!-- 自定义输入 -->
                        <div class="custom-input">
                            <h3>或自定义输入</h3>
                            <div class="input-group">
                                <label for="customTheme">主题/场景：</label>
                                <input type="text" id="customTheme" placeholder="如：超市、医院、公园">
                            </div>
                            <div class="input-group">
                                <label for="customTitle">标题：</label>
                                <input type="text" id="customTitle" placeholder="如：《走进超市》">
                            </div>

                            <!-- 自定义词汇输入 -->
                            <div class="custom-words">
                                <h4>自定义词汇（可选）</h4>
                                <div class="input-group">
                                    <label for="customCoreWords">核心角色与设施：</label>
                                    <textarea id="customCoreWords" rows="3" placeholder="每行输入一个词汇，格式：拼音 中文&#10;例如：&#10;shōu yín yuán 收银员&#10;huò jià 货架"></textarea>
                                </div>
                                <div class="input-group">
                                    <label for="customItemWords">常见物品/工具：</label>
                                    <textarea id="customItemWords" rows="3" placeholder="每行输入一个词汇，格式：拼音 中文&#10;例如：&#10;píng guǒ 苹果&#10;niú nǎi 牛奶"></textarea>
                                </div>
                                <div class="input-group">
                                    <label for="customEnvWords">环境与装饰：</label>
                                    <textarea id="customEnvWords" rows="3" placeholder="每行输入一个词汇，格式：拼音 中文&#10;例如：&#10;chū kǒu 出口&#10;dēng 灯"></textarea>
                                </div>
                                <div class="clear-words">
                                    <button type="button" id="clearCustomWords" class="clear-btn">清空自定义词汇</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 生成控制区域 -->
                    <section class="generate-section">
                        <button id="generateBtn" class="generate-btn">🚀 生成小报</button>
                        <div class="progress-container" id="progressContainer" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                                <span class="progress-text" id="progressText">0%</span>
                            </div>
                            <div class="progress-detail" id="progressDetail">正在生成...</div>
                        </div>
                        <div class="status-message" id="statusMessage"></div>
                    </section>

                    <!-- 历史记录 -->
                    <section class="history-section" id="historySection" style="display: none;">
                        <h2>历史记录</h2>
                        <div class="history-list" id="historyList">
                            <!-- 动态生成历史记录 -->
                        </div>
                    </section>
                </div>

                <!-- 右侧：效果预览区 -->
                <div class="right-panel">
                    <div class="preview-section">
                        <h2>效果预览</h2>
                        <div class="preview-container" id="previewContainer">
                            <div class="preview-placeholder">
                                <p>🎨 生成的小报将在这里显示</p>
                            </div>
                            <div class="image-container" id="resultContainer" style="display: none;">
                                <img id="resultImage" src="" alt="生成的识字小报">
                                <div class="image-actions">
                                    <button id="downloadBtn" class="download-btn">💾 下载图片</button>
                                    <button id="newTabBtn" class="new-tab-btn">🔍 新标签查看</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="footer">
            <p>基于 Nano Banana Pro API 驱动 | 适用于儿童教育</p>
        </footer>
    </div>

    <!-- 加载JavaScript文件 -->
    <script src="js/theme-loader.js"></script>
    <script src="js/word-bank.js"></script>
    <script src="js/prompt-generator.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/app.js"></script>
</body>
</html>